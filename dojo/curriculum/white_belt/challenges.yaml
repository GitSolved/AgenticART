# White Belt Challenges
# Purpose: Validate the dojo system works correctly
# Focus: Basic ADB commands and system verification

challenges:
  # Challenge 1: Get Android Version
  - id: white_001
    name: "Device Android Version"
    description: |
      Write an ADB shell command that outputs the Android version of the connected device.
      The output should be just the version number (e.g., "7.0" or "11").
    belt: white
    difficulty: 1
    script_type: adb

    inputs:
      device_id: "emulator-5554"
      device_context:
        connection: "adb"
        task: "retrieve Android version"

    validation:
      type: regex_match
      pattern: "^\\d+(\\.\\d+)*"

    hints:
      - "Use 'adb shell getprop' to read system properties"
      - "Android version is stored in ro.build.version.release"

    kata_solution: "shell getprop ro.build.version.release"

    tags:
      - fundamentals
      - device-info

  # Challenge 2: List Installed Packages
  - id: white_002
    name: "Package Listing"
    description: |
      Write an ADB command that lists all installed packages on the device.
      Use the package manager to enumerate applications.
    belt: white
    difficulty: 1
    script_type: adb

    inputs:
      device_id: "emulator-5554"
      device_context:
        connection: "adb"
        task: "list installed packages"

    validation:
      type: output_contains
      expected: "package:"

    hints:
      - "Use the 'pm' (package manager) command"
      - "The list packages subcommand shows all packages"

    kata_solution: "shell pm list packages"

    tags:
      - fundamentals
      - packages

  # Challenge 3: Get Device Model
  - id: white_003
    name: "Device Model Info"
    description: |
      Write an ADB command that retrieves the device model name.
      This should return the marketing name of the device.
    belt: white
    difficulty: 1
    script_type: adb

    inputs:
      device_id: "emulator-5554"
      device_context:
        connection: "adb"
        task: "retrieve device model"

    validation:
      type: not_empty

    hints:
      - "Device properties are accessed via getprop"
      - "Model information is in ro.product.model"

    kata_solution: "shell getprop ro.product.model"

    tags:
      - fundamentals
      - device-info

  # Challenge 4: Check Running Processes
  - id: white_004
    name: "Process Enumeration"
    description: |
      Write an ADB command that lists all running processes on the device.
      The output should show process IDs and names.
    belt: white
    difficulty: 2
    script_type: adb

    inputs:
      device_id: "emulator-5554"
      device_context:
        connection: "adb"
        task: "enumerate running processes"

    validation:
      type: output_contains
      expected: "PID"

    hints:
      - "The 'ps' command shows running processes"
      - "You may need flags to show all processes"

    kata_solution: "shell ps"

    tags:
      - fundamentals
      - processes

  # Challenge 5: Intentional Failure Test
  # This challenge is designed to fail to verify the retry loop works
  - id: white_005
    name: "Protected File Access"
    description: |
      Write an ADB command that attempts to read the contents of /data/system/packages.xml.
      This file contains package information but requires elevated access.

      Note: This may fail due to permissions - that's expected.
    belt: white
    difficulty: 3
    script_type: adb

    inputs:
      device_id: "emulator-5554"
      device_context:
        connection: "adb"
        task: "read protected file"
        note: "This tests error handling - failure is expected"

    validation:
      type: output_contains
      expected: "package"

    hints:
      - "Use 'cat' to read file contents"
      - "The file is in /data/system/"
      - "If permission denied, you may need elevated access"

    kata_solution: "shell su -c 'cat /data/system/packages.xml'"

    tags:
      - error-handling
      - permissions
      - retry-test
